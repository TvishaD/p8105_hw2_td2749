---
title: "p8105_hw2_td2749"
author: "Tvisha R. Devavarapu"
date: "2022-09-29"
output: github_document
---

```{r Setting up tidyverse}
library(tidyverse)
```

# Problem 2: Trash Wheel

```{r Mr. Trash Wheel}

#The original excel sheet consists of 533 rows and 17 columns. Upon examination of the entire 'Mr. Trash Wheel' sheet, I have realized that NA cells in the 'Dumpster' column be used to remove the associated rows in the process of creating a tidy/analysis-friendly sheet. By setting up a range, I have excluded the last 3 columns as they contain only notes and also the last two rows (containing totals figures). The resultant sheet has 453 dumpster-specific rows and 14 columns. 

mr_trash_wheel = 
  readxl::read_excel("data/t_w.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N533", na = "") %>%
  drop_na(Dumpster) %>%
  janitor::clean_names() %>%
  rename(weight = weight_tons, volume = volume_cubic_yards) %>%
  mutate(sports_balls = as.integer(round(sports_balls)))

mr_trash_wheel = mutate(mr_trash_wheel, identifier = rep("*", nrow(mr_trash_wheel)))
  
```

```{r Professor Trash Wheel}
prof_trash_wheel = 
  readxl::read_excel("data/t_w.xlsx", sheet = "Professor Trash Wheel", range = "A2:N115", na = "") %>%
  drop_na(Dumpster) %>%
  janitor::clean_names() %>%
  rename(weight = weight_tons, volume = volume_cubic_yards) %>%
  mutate(sports_balls = as.integer(round(sports_balls)))

prof_trash_wheel = mutate(prof_trash_wheel, identifier = rep("#", nrow(prof_trash_wheel)))
```

```{r Binding Mr. Trash Wheel and Professor Trash Wheel}
trash_wheel_collective = 
  bind_rows(mr_trash_wheel, prof_trash_wheel) #Ask about not specifying anything about stacking criteria here. 
```

```{r Using group_by; unsure, include = FALSE}
# NOT SURE. 

calculated_values = 
  trash_wheel_collective %>% 
  group_by(identifier) %>% 
  summarize(total_weight = sum(weight),
            total_sports_balls = sum(sports_balls)) %>% 
  ungroup()

calculated_values
```


Write a paragraph about these data; you are encouraged to use inline R. Be sure to note the number of observations in the resulting dataset, and give examples of key variables. For available data, what was the total weight of trash collected by Professor Trash Wheel? What was the total number of sports balls collected by Mr. Trash Wheel in 2020?

The final dataset `trash_wheel_collective` consists of *524 observations* ranging across *15 columns*. 453 of the observations pertain to unique dumpsters associated with Mr. Trash Wheel. The remaining 71 observations pertain to the unique dumpsters associated with Professor Trash Wheel. The column names are: `dumpster` (unique dumpster number), `month`,`year`, and `date` of trash collection, `weight` of trash collected in _tons_, `volume` of trash collected in _cubic yards_, `plastic_bottles` (number?), `polystyrene` (presumably number of items), `cigarette_butts`, `glass_bottles`, `grocery_bags`, `chips_bags`, and `sports_balls` all in numbers, `homes_powered` from the energy generated through trash conversion, and a final `identifier` column for easy distinction between the Mr. Trash Wheel and Professor Trash Wheel data.

* The total weight of trash collected by Professor Trash Wheel was: `r with(trash_wheel_collective, sum(weight[identifier == "#"]))` tons. 
* The total number of sports balls collected by Mr. Trash Wheel in 2020 was: `r with(trash_wheel_collective, sum(sports_balls[year == 2020 | identifier == '*']))`

*Is there a better way to do the above? What are the different ways?* 


# Problem 2: FiveThirtyEight - Hack Your Way To Scientific Glory

```{r Setting up "pols-month" data}
politician_data = 
  read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month", "day"), sep = "-") %>%
  mutate(month = recode(month, "01" = "january", "02" = "february", "03" = "march", "04" = "april", 
                        "05" = "may", "06" = "june", "07" = "july", "08" = "august", "09" = "september",
                        "10" = "october", "11" = "november", "12" = "december")) %>%
  mutate(president = recode(prez_dem, "0" = "gop", "1" = "dem")) %>%
  select(-prez_dem, -prez_gop, -day) %>%
  select(year, month, president, everything())
```









